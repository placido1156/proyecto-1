<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Resultado - Samurái</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>

<body>
  <a-scene>

    <!-- SKY / fondo 360 -->
    <a-sky src="assets/360/fondo360.jpg"></a-sky>

    <!-- Cámara + cursor -->
    <a-entity id="camRig" position="0 1.6 0">
      <a-entity camera look-controls>
        <a-cursor id="cursor" fuse="false" rayOrigin="mouse"></a-cursor>
      </a-entity>
    </a-entity>

    <!-- Luz -->
    <a-entity light="type: directional; intensity: 1" position="1 3 2"></a-entity>

<!-- Samurai con katana -->
<a-gltf-model id="samurai" 
              src="assets/models/samurai/scene.gltf"
              rotation="0 180 0"
              position="-2 0 -2"
              scale="1 1 1"
              animation__idle="property: position; dir: alternate; dur: 2000; to: -2 0.08 -2; loop: true; easing: easeInOutSine"
              animation__idle2="property: rotation; dir: alternate; dur: 2500; to: 0 185 0; loop: true; easing: easeInOutSine">
  
  <!-- Katana "adjunta" al samurai -->
  <a-gltf-model src="assets/models/katana/scene.gltf"
                position="1 2 0"  
                rotation="0 180 270"
                scale="0.8 0.8 0.8">
  </a-gltf-model>

</a-gltf-model>


    <!-- Panel con ids -->
    <a-entity id="panel" position="-1 2 -2">
      <a-text id="t1" value="Fuerza katana: ..." color="#FFF"></a-text>
      <a-text id="t2" value="Temperatura: ..." position="0 -0.4 0" color="#FFF"></a-text>
      <a-text id="t3" value="Calidad final: ..." position="0 -0.8 0" color="#FFF"></a-text>
    </a-entity>

    <!-- Botón de animación del samurai -->
    <a-box id="botonAtaque" position="1 1 -2" width="0.6" height="0.4" depth="0.3" color="#FF2222"></a-box>
    <a-text value="Mostrar ataque" position="0.6 1.6 -2" color="#FFF"></a-text>

    <!-- Música épica -->
    <a-sound src="assets/sounds/epic.mp3" autoplay="true" loop="false" volume="0.6"></a-sound>

  </a-scene>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const t1 = document.querySelector('#t1');
      const t2 = document.querySelector('#t2');
      const t3 = document.querySelector('#t3');
      const botonAtaque = document.querySelector('#botonAtaque');
      const samurai = document.querySelector('#samurai');

      // Datos dinámicos de ejemplo
      let fuerza = 80;
      let temperatura = 900;
      let calidad = 'A';

      setInterval(() => {
        t1.setAttribute('value', 'Fuerza katana: ' + fuerza);
        t2.setAttribute('value', 'Temperatura: ' + temperatura + 'ºC');
        t3.setAttribute('value', 'Calidad final: ' + calidad);
      }, 700);

      // Botón ataque → animación simple (NO requiere modelos con clips)
      botonAtaque.addEventListener('click', () => {
        samurai.setAttribute('animation__ataque', {
          property: 'rotation',
          to: '0 220 0',
          dur: 300,
          dir: 'alternate',
          loop: 2,
          easing: 'easeInOutSine'
        });
      });

      botonAtaque.addEventListener('mouseenter', () => { 
        botonAtaque.setAttribute('color', '#FF6666'); 
      });
      
      botonAtaque.addEventListener('mouseleave', () => { 
        botonAtaque.setAttribute('color', '#FF2222'); 
      });
    });
  </script>
</body>
</html>
